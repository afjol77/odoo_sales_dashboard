<?xml version="1.0" encoding="UTF-8" ?>
<templates id="sales_dashboard_template" xml:space="preserve">
    <t t-name="sales_dashboard" owl="1">
        <div class="parent-div"
             style="height:100% !important; overflow-y:scroll !important; font-family:roboto; background-color: #F7F7F7;">
            <link rel="stylesheet" type="text/css" href="odoo_sales_dashboard/static/src/css/sales_dashboard.css"/>
            <t t-call="sales-section"/>
        </div>
    </t>

    <t t-name="sales-section" owl="1">
        <section id="sales_section" class="dashboard-container">
            <t t-call="sales_cards"/>

            <!-- Charts Section: Second Row (col-lg-6 for each canvas) -->
            <div class="row">
                <div class="col-lg-6 mb-4">
                    <canvas t-ref="canvasMonthlySales"/>
                </div>
                <div class="col-lg-6 mb-4">
                    <canvas t-ref="canvasTopSellingProducts"/>
                </div>
                <div class="col-lg-6 mb-4">
                    <canvas t-ref="canvasFulfillmentEfficiency"/>
                </div>
                <div class="col-lg-6 mb-4">
                    <canvas t-ref="canvasSalesByCustomer"/>
                </div>
            </div>

            <t t-call="top_sales_reps_section"/>
        </section>
    </t>

    <t t-name="sales_cards">
    <!-- First Row: Total Sales and Operational Metrics -->
    <div class="row mb-3">
        <!-- Total Sales Card -->
        <div class="col-lg-3 col-md-6 mb-3">
            <div class="card sales-card light-blue">
                <div>
                    <h3>Total Sales</h3>
                    <i class="fa fa-dollar sales-card-icon"></i>
                </div>
                <div class="card-data">
                    <p><t t-esc="total_sales_amount" /></p>
                </div>
            </div>
        </div>

        <!-- Average Profit Margin Card -->
        <div class="col-lg-3 col-md-6 mb-3">
            <div class="card sales-card light-orange">
                <div>
                    <h3>Average Profit Margin</h3>
                    <i class="fa fa-dollar sales-card-icon"></i>
                </div>
                <div class="card-data">
                    <p><t t-esc="average_profit_margin" /></p>
                </div>
            </div>
        </div>

        <!-- Conversion Rate Card -->
        <div class="col-lg-3 col-md-6 mb-3">
            <div class="card sales-card light-green">
                <div>
                    <h3>Conversion Rate</h3>
                    <i class="fa fa-dollar sales-card-icon"></i>
                </div>
                <div class="card-data">
                    <p><t t-esc="conversion_rate" /></p>
                </div>
            </div>
        </div>

        <!-- Average Lead to Order Time Card -->
        <div class="col-lg-3 col-md-6 mb-3">
            <div class="card sales-card light-yellow">
                <div>
                    <h3>Average Lead to Order Time</h3>
                    <i class="fa fa-dollar sales-card-icon"></i>
                </div>
                <div class="card-data">
                    <p><t t-esc="average_lead_to_order_time" /></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Second Row: Sales Funnel Data -->
    <div class="row mb-4">
        <div class="col-lg-3 col-md-6 mb-3">
            <div class="card sales-card light-blue">
                <div>
                    <h3>Leads</h3>
                    <i class="fa fa-dollar sales-card-icon"></i>
                </div>
                <div class="card-data">
                    <p><t t-esc="leads" /></p>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-md-6 mb-3">
            <div class="card sales-card light-blue">
                <div>
                    <h3>Opportunities</h3>
                    <i class="fa fa-dollar sales-card-icon"></i>
                </div>
                <div class="card-data">
                    <p><t t-esc="opportunities" /></p>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-md-6 mb-3">
            <div class="card sales-card light-blue">
                <div>
                    <h3>Quotations</h3>
                    <i class="fa fa-dollar sales-card-icon"></i>
                </div>
                <div class="card-data">
                    <p><t t-esc="quotations" /></p>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-md-6 mb-3">
            <div class="card sales-card light-blue">
                <div>
                    <h3>Confirmed Sales</h3>
                    <i class="fa fa-dollar sales-card-icon"></i>
                </div>
                <div class="card-data">
                    <p><t t-esc="confirmed_sales" /></p>
                </div>
            </div>
        </div>
    </div>
    </t>





    <t t-name="top_sales_reps_section">
        <div class="row">
            <div class="col-lg-12 mb-4">
                <table class="table table-bordered table-striped">
                    <thead class="thead-light">
                        <tr>
                            <th>Sales Representative</th>
                            <th>Sales Volume</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="top_sales_reps" t-as="rep" t-key="rep.id">
                            <tr>
                                <td><t t-esc="rep.sales_rep_name"/></td>
                                <td><t t-esc="rep.sales_volume" t-options="{'widget': 'monetary'}"/></td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </div>
    </t>


</templates>
